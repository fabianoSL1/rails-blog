<%= render "shared/header" %>
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-4 mt-5">
      <h2>Edit profile</h2>
      <%= form_with model: @user, url: profile_path, method: :put do |form| %>

        <% if @user.errors.any? %>
          <div class="alert alert-warning" role="alert">
            <ul class="m-0">
              <% @user.errors.full_messages.each do |message| %>
                <li class="text-start"><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="form-floating mb-3">
          <%= form.text_field :name,
                              class: (@user.errors.full_messages_for(:name).any? ? "form-control is-invalid" : "form-control"),
                              placeholder: "Name"
          %>
          <%= form.label :name,
                         class: (@user.errors.full_messages_for(:name).any? ? "d-none" : "")
          %>
        </div>

        <div class="form-floating mb-3">
          <%= form.password_field :password,
                                  class: (@user.errors.full_messages_for(:password).any? ? "form-control is-invalid" : "form-control"),
                                  placeholder: "new password"
          %>
          <%= form.label :password,
                         class: (@user.errors.full_messages_for(:password).any? ? "d-none" : "")
          %>
        </div>

        <div class="form-floating mb-3">
          <%= form.password_field :password_confirmation,
                                  class: (@user.errors.full_messages_for(:password_confirmation).any? ? "form-control is-invalid" : "form-control"),
                                  placeholder: "password confirmation"
          %>
          <%= form.label :password_confirmation,
                         class: (@user.errors.full_messages_for(:password_confirmation).any? ? "d-none" : "")
          %>
        </div>
        <div class="d-flex flex-column gap-4 mt-4">
          <%= form.submit "Save", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>